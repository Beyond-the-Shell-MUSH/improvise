<!DOCTYPE html>
<html lang="en">
<head>
<title>Stunt | Improvise</title>
<link type="text/css" rel="stylesheet" href="/css/bootstrap-2.0.1.min.css">
<link type="text/css" rel="stylesheet" href="/css/bootstrap-responsive-2.0.1.min.css">
<link type="text/css" rel="stylesheet" href="/css/moo-0.0.0.min.css">
<script type="text/javascript" src="/js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="/js/jquery.ui.core-1.8.18.min.js"></script>
<script type="text/javascript" src="/js/jquery.ui.widget-1.8.18.min.js"></script>
<script type="text/javascript" src="/js/underscore-1.3.1.min.js"></script>
<script type="text/javascript" src="/js/backbone-0.9.1.min.js"></script>
<script type="text/javascript" src="/js/swfobject-2.1.min.js"></script>
<script type="text/javascript" src="/js/moo-0.0.1.min.js"></script>
<script type="text/javascript" src="/js/Socket.js"></script>
<script type="text/javascript">
var flashvars = {};
var params = {menu: 'false', scale: 'noScale', allowFullscreen: 'true', allowScriptAccess: 'always', bgcolor: '#FFFFFF'};
var attributes = {id: 'JavascriptSocket', name: 'JavascriptSocket'};
swfobject.embedSWF('/flash/javascriptsocket.swf', 'flash-content', '100%', '100%', '9.0.0', null, flashvars, params, attributes);
</script>
</head>
<body>
  <div class="container">
    &nbsp;
    <div class="row">
      <div class="span12">
        <ul>
          <li><a rel="object" data-object-number="0" href="/objects/0">#0</a></li>
        </ul>
      </div>
    </div>
    <hr>
    <div id="browser"></div>
    <hr>
    <div id="terminal"></div>
    <hr>
    <div id="flash-content"></div>
  </div>
  <script type="text/javascript">
    $(function() {
      Moo.Object.prototype.urlRoot = window.location.href + '//objects';

      var $terminal = $('#terminal');
      $terminal.commandPanel({host: window.location.hostname, port: window.location.port});

      var $browser = $('#browser');
      $browser.simpleObjectPanel();

      $('body').on('click', 'a[rel*=object]', function(e) {
        e.preventDefault();
        var on = $(e.target).data('object-number');
        var o = new Moo.Object({id: on});
        o.fetch({
          success: function(model, response) {
            $browser.simpleObjectPanel({object: o});
          },
          error: function(model, response) {
            $browser.simpleObjectPanel({object: o});
          }
        });
      });
    });
  </script>
</body>
</html>
